{"ast":null,"code":"var _jsxFileName = \"/app/src/pages/FollowsPage.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from 'react-redux';\nimport { useHistory } from \"react-router-dom\";\nimport Lightbox from \"react-image-lightbox\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport axios from 'axios';\nimport ls from 'local-storage';\nimport MoreVertOutlinedIcon from '@material-ui/icons/MoreVertOutlined';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport UseFollowsItem from \"./UseFollowsItem\";\nimport { followUp } from '../actions/user';\nimport { addContentsData, addFollowsData } from '../actions/app';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _ = require('lodash');\n\nconst useHasChanged = val => {\n  _s();\n\n  const prevVal = usePrevious(val);\n  return prevVal !== val;\n};\n\n_s(useHasChanged, \"HoNKRQGo64iDpoe4UBQ72tkFRV0=\", false, function () {\n  return [usePrevious];\n});\n\nconst usePrevious = value => {\n  _s2();\n\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n\n_s2(usePrevious, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n\nconst FollowsPage = props => {\n  _s3();\n\n  const history = useHistory();\n  const [follows, setFollows] = useState([]);\n  useEffect(() => {\n    fetch();\n  }, []);\n  useEffect(async () => {\n    setFollows(props.follows);\n  }, [props.follows]);\n\n  const fetch = async () => {\n    try {\n      let response = await axios.post(`/api/v1/follows`, {\n        uid: props.user.uid\n      }, {\n        headers: {\n          'Authorization': `Basic ${ls.get('basic_auth')}`\n        }\n      });\n      response = response.data;\n      console.log(\"response : \", response);\n\n      if (response.result) {\n        props.addFollowsData(response.datas);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const updateState = data => {\n    switch (Object.keys(data)[0]) {\n      case \"showModalLogin\":\n        {\n          // setShowModalLogin(Object.values(data)[0])\n          break;\n        }\n\n      case \"showModalReport\":\n        {\n          // setShowModalReport(Object.values(data)[0])\n          break;\n        }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your follows\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), follows.map(item => {\n      return /*#__PURE__*/_jsxDEV(UseFollowsItem, { ...props,\n        item: item,\n        updateState: updateState // onModalConfirmDelete={onModalConfirmDelete}\n        // onModalConfirmUpdateStatus={onModalConfirmUpdateStatus}\n\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 28\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this); // return (<div className=\"container mb-5\">\n  //             <div className=\"row d-flex flex-row py-5\"> \n  //             {\n  //             followUp.map(item => (\n  //                 <UseFollowsItem \n  //                     {...props} \n  //                     item={item}\n  //                     updateState={updateState}\n  //                     followUp={(data)=>{\n  //                         props.followUp(data)\n  //                     }}/>\n  //             ))\n  //             }\n  //             </div>\n  //         </div>)\n};\n\n_s3(FollowsPage, \"rNEnbbmQ3z6JoERyGWcEjZBDyO0=\", false, function () {\n  return [useHistory];\n});\n\n_c = FollowsPage;\n\nconst mapStateToProps = async (state, ownProps) => {\n  // let datas = state.app.data\n  // let follows = state.app.follows.map((o)=>{\n  //                                             let i = datas.find((d)=>d.nid === o.nid)\n  //                                             if(!_.isEmpty(i)){\n  //                                                 i = {...i, date: o.date}\n  //                                             }\n  //                                             return i\n  //                                         }).filter((f)=>!_.isEmpty(f))\n  let follows = [];\n  let state_app_follows = state.app.follows;\n\n  if (!_.isEmpty(state_app_follows)) {\n    let follows_filter = state_app_follows.filter(o => {\n      return _.isEmpty(props.datas.find(d => d.nid === o.nid));\n    }).map(i => i.nid);\n    follows = state_app_follows.map(o => {\n      return props.datas.find(d => d.nid === o.nid);\n    }).filter(f => !_.isEmpty(f));\n\n    if (!_.isEmpty(follows_filter)) {\n      let response = await axios.post(`/api/v1/search`, {\n        type: 3,\n        key_word: follows_filter\n      }, {\n        headers: {\n          'Authorization': `Basic ${ls.get('basic_auth')}`\n        }\n      });\n      response = response.data;\n\n      if (response.result) {\n        let {\n          execution_time,\n          datas,\n          count\n        } = response;\n        props.addContentsData(datas);\n        follows = [...follows, ...follows_filter.map(o => {\n          return datas.find(d => d.nid === o.nid);\n        }).filter(f => !_.isEmpty(f))];\n      }\n    }\n  }\n\n  return {\n    user: state.user.data,\n    datas: state.app.data,\n    follows: state.app.follows,\n    maintenance: state.setting.maintenance\n  };\n};\n\nconst mapDispatchToProps = {\n  followUp,\n  addContentsData,\n  addFollowsData\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowsPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"FollowsPage\");","map":{"version":3,"sources":["/app/src/pages/FollowsPage.js"],"names":["React","useEffect","useState","useRef","connect","useHistory","Lightbox","MenuItem","Menu","axios","ls","MoreVertOutlinedIcon","LazyLoadImage","UseFollowsItem","followUp","addContentsData","addFollowsData","_","require","useHasChanged","val","prevVal","usePrevious","value","ref","current","FollowsPage","props","history","follows","setFollows","fetch","response","post","uid","user","headers","get","data","console","log","result","datas","err","updateState","Object","keys","map","item","mapStateToProps","state","ownProps","state_app_follows","app","isEmpty","follows_filter","filter","o","find","d","nid","i","f","type","key_word","execution_time","count","maintenance","setting","mapDispatchToProps"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,eAAf;AAEA,OAAOC,oBAAP,MAAiC,qCAAjC;AAEA,SAASC,aAAT,QAA8B,iCAA9B;AAEA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAASC,QAAT,QAAyB,iBAAzB;AAEA,SAASC,eAAT,EAA0BC,cAA1B,QAAgD,gBAAhD;;;AAEA,IAAIC,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAf;;AAEA,MAAMC,aAAa,GAAGC,GAAD,IAAS;AAAA;;AAC1B,QAAMC,OAAO,GAAGC,WAAW,CAACF,GAAD,CAA3B;AACA,SAAOC,OAAO,KAAKD,GAAnB;AACH,CAHD;;GAAMD,a;UACcG,W;;;AAIpB,MAAMA,WAAW,GAAIC,KAAD,IAAW;AAAA;;AAC3B,QAAMC,GAAG,GAAGrB,MAAM,EAAlB;AACAF,EAAAA,SAAS,CAAC,MAAM;AACduB,IAAAA,GAAG,CAACC,OAAJ,GAAcF,KAAd;AACD,GAFQ,CAAT;AAGA,SAAOC,GAAG,CAACC,OAAX;AACH,CAND;;IAAMH,W;;AAQN,MAAMI,WAAW,GAAIC,KAAD,IAAW;AAAA;;AAC3B,QAAMC,OAAO,GAAGvB,UAAU,EAA1B;AAEA,QAAM,CAACwB,OAAD,EAAUC,UAAV,IAA4B5B,QAAQ,CAAC,EAAD,CAA1C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ8B,IAAAA,KAAK;AACR,GAFQ,EAEN,EAFM,CAAT;AAIA9B,EAAAA,SAAS,CAAE,YAAW;AAClB6B,IAAAA,UAAU,CAACH,KAAK,CAACE,OAAP,CAAV;AACH,GAFQ,EAEN,CAACF,KAAK,CAACE,OAAP,CAFM,CAAT;;AAIA,QAAME,KAAK,GAAG,YAAU;AACpB,QAAG;AACC,UAAIC,QAAQ,GAAI,MAAMvB,KAAK,CAACwB,IAAN,CAAY,iBAAZ,EACU;AAAEC,QAAAA,GAAG,EAAEP,KAAK,CAACQ,IAAN,CAAWD;AAAlB,OADV,EAEU;AAAEE,QAAAA,OAAO,EAAE;AAAC,2BAAkB,SAAQ1B,EAAE,CAAC2B,GAAH,CAAO,YAAP,CAAqB;AAAhD;AAAX,OAFV,CAAtB;AAIAL,MAAAA,QAAQ,GAAGA,QAAQ,CAACM,IAApB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BR,QAA3B;;AACA,UAAGA,QAAQ,CAACS,MAAZ,EAAmB;AACfd,QAAAA,KAAK,CAACX,cAAN,CAAqBgB,QAAQ,CAACU,KAA9B;AACH;AACJ,KAVD,CAUE,OAAOC,GAAP,EAAY;AACVJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACH;AACJ,GAdD;;AAgBA,QAAMC,WAAW,GAAGN,IAAI,IAAI;AACxB,YAAOO,MAAM,CAACC,IAAP,CAAYR,IAAZ,EAAkB,CAAlB,CAAP;AACE,WAAK,gBAAL;AAAsB;AACpB;AACA;AACD;;AACD,WAAK,iBAAL;AAAuB;AACrB;AACA;AACD;AARH;AAUH,GAXD;;AAaA,sBACI;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,EAGQT,OAAO,CAACkB,GAAR,CAAaC,IAAD,IAAQ;AAChB,0BAAO,QAAC,cAAD,OACCrB,KADD;AAEH,QAAA,IAAI,EAAEqB,IAFH;AAGH,QAAA,WAAW,EAAEJ,WAHV,CAIH;AACA;;AALG;AAAA;AAAA;AAAA;AAAA,cAAP;AAOH,KARD,CAHR;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CA1C2B,CA2D3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CA1ED;;IAAMlB,W;UACcrB,U;;;KADdqB,W;;AA4EN,MAAMuB,eAAe,GAAG,OAAMC,KAAN,EAAaC,QAAb,KAA0B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAItB,OAAO,GAAG,EAAd;AACA,MAAIuB,iBAAiB,GAAIF,KAAK,CAACG,GAAN,CAAUxB,OAAnC;;AACA,MAAG,CAACZ,CAAC,CAACqC,OAAF,CAAUF,iBAAV,CAAJ,EAAiC;AAE7B,QAAIG,cAAc,GAAGH,iBAAiB,CAACI,MAAlB,CAA0BC,CAAD,IAAK;AACP,aAAOxC,CAAC,CAACqC,OAAF,CAAU3B,KAAK,CAACe,KAAN,CAAYgB,IAAZ,CAAkBC,CAAD,IAAKA,CAAC,CAACC,GAAF,KAAUH,CAAC,CAACG,GAAlC,CAAV,CAAP;AACH,KAFpB,EAEsBb,GAFtB,CAE2Bc,CAAD,IAAKA,CAAC,CAACD,GAFjC,CAArB;AAIA/B,IAAAA,OAAO,GAAKuB,iBAAiB,CAACL,GAAlB,CAAuBU,CAAD,IAAK;AACf,aAAO9B,KAAK,CAACe,KAAN,CAAYgB,IAAZ,CAAkBC,CAAD,IAAKA,CAAC,CAACC,GAAF,KAAUH,CAAC,CAACG,GAAlC,CAAP;AACH,KAFT,EAEWJ,MAFX,CAEmBM,CAAD,IAAK,CAAC7C,CAAC,CAACqC,OAAF,CAAUQ,CAAV,CAFxB,CAAZ;;AAIA,QAAG,CAAC7C,CAAC,CAACqC,OAAF,CAAUC,cAAV,CAAJ,EAA8B;AAC1B,UAAIvB,QAAQ,GAAI,MAAMvB,KAAK,CAACwB,IAAN,CAAY,gBAAZ,EACE;AAAI8B,QAAAA,IAAI,EAAE,CAAV;AACIC,QAAAA,QAAQ,EAAET;AADd,OADF,EAIE;AAAEnB,QAAAA,OAAO,EAAE;AAAC,2BAAkB,SAAQ1B,EAAE,CAAC2B,GAAH,CAAO,YAAP,CAAqB;AAAhD;AAAX,OAJF,CAAtB;AAMAL,MAAAA,QAAQ,GAAGA,QAAQ,CAACM,IAApB;;AACA,UAAGN,QAAQ,CAACS,MAAZ,EAAmB;AACf,YAAI;AAACwB,UAAAA,cAAD;AAAiBvB,UAAAA,KAAjB;AAAwBwB,UAAAA;AAAxB,YAAkClC,QAAtC;AACAL,QAAAA,KAAK,CAACZ,eAAN,CAAsB2B,KAAtB;AAEAb,QAAAA,OAAO,GAAG,CAAC,GAAGA,OAAJ,EAAa,GAAG0B,cAAc,CAACR,GAAf,CAAoBU,CAAD,IAAK;AAAE,iBAAOf,KAAK,CAACgB,IAAN,CAAYC,CAAD,IAAKA,CAAC,CAACC,GAAF,KAAUH,CAAC,CAACG,GAA5B,CAAP;AAAyC,SAAnE,EAAqEJ,MAArE,CAA6EM,CAAD,IAAK,CAAC7C,CAAC,CAACqC,OAAF,CAAUQ,CAAV,CAAlF,CAAhB,CAAV;AACH;AACJ;AACJ;;AAEJ,SAAO;AACA3B,IAAAA,IAAI,EAAEe,KAAK,CAACf,IAAN,CAAWG,IADjB;AAEAI,IAAAA,KAAK,EAAEQ,KAAK,CAACG,GAAN,CAAUf,IAFjB;AAGAT,IAAAA,OAAO,EAAEqB,KAAK,CAACG,GAAN,CAAUxB,OAHnB;AAIAsC,IAAAA,WAAW,EAAEjB,KAAK,CAACkB,OAAN,CAAcD;AAJ3B,GAAP;AAMA,CA7CD;;AA+CA,MAAME,kBAAkB,GAAG;AACvBvD,EAAAA,QADuB;AAGvBC,EAAAA,eAHuB;AAIvBC,EAAAA;AAJuB,CAA3B;AAOA,eAAeZ,OAAO,CAAC6C,eAAD,EAAkBoB,kBAAlB,CAAP,CAA6C3C,WAA7C,CAAf","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from 'react-redux'\nimport { useHistory } from \"react-router-dom\";\n\nimport Lightbox from \"react-image-lightbox\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\n\nimport axios from 'axios';\nimport ls from 'local-storage';\n\nimport MoreVertOutlinedIcon from '@material-ui/icons/MoreVertOutlined';\n\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\n\nimport UseFollowsItem from \"./UseFollowsItem\";\nimport { followUp } from '../actions/user';\n\nimport { addContentsData, addFollowsData } from '../actions/app'\n\nvar _ = require('lodash');\n\nconst useHasChanged= (val) => {\n    const prevVal = usePrevious(val)\n    return prevVal !== val\n}\n\nconst usePrevious = (value) => {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n}\n\nconst FollowsPage = (props) => {\n    const history = useHistory();\n\n    const [follows, setFollows]     = useState([]);\n\n    useEffect(() => {\n        fetch()\n    }, []);\n\n    useEffect( async() => {\n        setFollows(props.follows)\n    }, [props.follows]);\n\n    const fetch = async() =>{\n        try{\n            let response =  await axios.post(`/api/v1/follows`, \n                                            { uid: props.user.uid }, \n                                            { headers: {'Authorization': `Basic ${ls.get('basic_auth')}` } });\n\n            response = response.data\n            console.log(\"response : \", response )\n            if(response.result){\n                props.addFollowsData(response.datas);\n            }\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    const updateState = data => {\n        switch(Object.keys(data)[0]){\n          case \"showModalLogin\":{\n            // setShowModalLogin(Object.values(data)[0])\n            break;\n          }\n          case \"showModalReport\":{\n            // setShowModalReport(Object.values(data)[0])\n            break;\n          }\n        }\n    }\n\n    return (\n        <div>\n            <h1>Your follows</h1>\n            {\n                follows.map((item)=>{\n                    return <UseFollowsItem \n                        {...props} \n                        item={item}\n                        updateState={updateState}\n                        // onModalConfirmDelete={onModalConfirmDelete}\n                        // onModalConfirmUpdateStatus={onModalConfirmUpdateStatus}\n                    />\n                })\n            }\n        </div>\n    )\n  \n    // return (<div className=\"container mb-5\">\n    //             <div className=\"row d-flex flex-row py-5\"> \n    //             {\n    //             followUp.map(item => (\n    //                 <UseFollowsItem \n    //                     {...props} \n    //                     item={item}\n    //                     updateState={updateState}\n    //                     followUp={(data)=>{\n    //                         props.followUp(data)\n    //                     }}/>\n    //             ))\n    //             }\n    //             </div>\n    //         </div>)\n}\n\nconst mapStateToProps = async(state, ownProps) => {\n    // let datas = state.app.data\n    // let follows = state.app.follows.map((o)=>{\n    //                                             let i = datas.find((d)=>d.nid === o.nid)\n    //                                             if(!_.isEmpty(i)){\n    //                                                 i = {...i, date: o.date}\n    //                                             }\n    //                                             return i\n    //                                         }).filter((f)=>!_.isEmpty(f))\n\n    let follows = []\n    let state_app_follows =  state.app.follows;\n    if(!_.isEmpty(state_app_follows)){\n\n        let follows_filter = state_app_follows.filter((o)=>{\n                                                    return _.isEmpty(props.datas.find((d)=>d.nid === o.nid)) \n                                                }).map((i)=>i.nid)\n\n        follows =   state_app_follows.map((o)=>{\n                                return props.datas.find((d)=>d.nid === o.nid) \n                            }).filter((f)=>!_.isEmpty(f))\n\n        if(!_.isEmpty(follows_filter)){\n            let response =  await axios.post(`/api/v1/search`, \n                                    {   type: 3,\n                                        key_word: follows_filter,\n                                    }, \n                                    { headers: {'Authorization': `Basic ${ls.get('basic_auth')}` } });\n\n            response = response.data\n            if(response.result){\n                let {execution_time, datas, count } = response;\n                props.addContentsData(datas);\n\n                follows = [...follows, ...follows_filter.map((o)=>{ return datas.find((d)=>d.nid === o.nid) }).filter((f)=>!_.isEmpty(f)) ]\n            }\n        }\n    }\n\n\treturn {\n        user: state.user.data,\n        datas: state.app.data,\n        follows: state.app.follows,\n        maintenance: state.setting.maintenance\n    };\n}\n\nconst mapDispatchToProps = {\n    followUp,\n\n    addContentsData,\n    addFollowsData,\n}\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(FollowsPage)"]},"metadata":{},"sourceType":"module"}