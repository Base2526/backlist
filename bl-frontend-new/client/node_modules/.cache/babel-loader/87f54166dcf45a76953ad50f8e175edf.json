{"ast":null,"code":"import { INIT_MY_FOLLOW, MY_FOLLOW, MY_FOLLOW_ALL, MY_FOLLOW_UPDATE_STATUS } from '../constants';\nconst initialState = {\n  data: []\n};\n\nconst my_follows = (state = initialState, action) => {\n  switch (action.type) {\n    case INIT_MY_FOLLOW:\n      {\n        return initialState;\n      }\n\n    case MY_FOLLOW:\n      {\n        let state_data = state.data;\n        let action_data = action.data;\n        let index = state_data.findIndex(obj => obj.nid == action_data);\n\n        if (index === -1) {\n          let new_state_data = [...state_data, {\n            nid: action_data,\n            status: true,\n            date: Date.now(),\n            local: true\n          }];\n          return { ...state,\n            data: new_state_data\n          };\n        } else {\n          let new_state_data = [...state_data];\n          new_state_data[index] = {\n            nid: action_data,\n            status: !state_data[index].status,\n            date: Date.now(),\n            local: true\n          };\n          return { ...state,\n            data: new_state_data\n          };\n        }\n      }\n\n    case MY_FOLLOW_ALL:\n      {\n        return { ...state,\n          data: action.data.my_follows\n        };\n      }\n\n    case MY_FOLLOW_UPDATE_STATUS:\n      {\n        let state_data = state.data;\n        state_data.map(sd => {\n          sd.local = false;\n          return sd;\n        });\n        return { ...state,\n          data: state_data\n        };\n      }\n\n    default:\n      return state;\n  }\n\n  return state;\n};\n\nexport default my_follows;","map":{"version":3,"sources":["/app/src/reducers/my_follows.js"],"names":["INIT_MY_FOLLOW","MY_FOLLOW","MY_FOLLOW_ALL","MY_FOLLOW_UPDATE_STATUS","initialState","data","my_follows","state","action","type","state_data","action_data","index","findIndex","obj","nid","new_state_data","status","date","Date","now","local","map","sd"],"mappings":"AAAA,SAASA,cAAT,EAAyBC,SAAzB,EAAoCC,aAApC,EAAmDC,uBAAnD,QAAiF,cAAjF;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,IAAI,EAAE;AADW,CAArB;;AAIA,MAAMC,UAAU,GAAG,CAACC,KAAK,GAAGH,YAAT,EAAuBI,MAAvB,KAAkC;AACjD,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKT,cAAL;AAAoB;AAChB,eAAOI,YAAP;AACH;;AAED,SAAKH,SAAL;AAAe;AACX,YAAIS,UAAU,GAAIH,KAAK,CAACF,IAAxB;AACA,YAAIM,WAAW,GAAGH,MAAM,CAACH,IAAzB;AAEA,YAAIO,KAAK,GAAGF,UAAU,CAACG,SAAX,CAAsBC,GAAG,IAAIA,GAAG,CAACC,GAAJ,IAAWJ,WAAxC,CAAZ;;AACA,YAAGC,KAAK,KAAK,CAAC,CAAd,EAAgB;AACb,cAAKI,cAAc,GAAG,CAAC,GAAGN,UAAJ,EAAgB;AAACK,YAAAA,GAAG,EAAEJ,WAAN;AAAmBM,YAAAA,MAAM,EAAC,IAA1B;AAAgCC,YAAAA,IAAI,EAAEC,IAAI,CAACC,GAAL,EAAtC;AAAkDC,YAAAA,KAAK,EAAC;AAAxD,WAAhB,CAAtB;AAEA,iBAAQ,EAAE,GAAGd,KAAL;AAAYF,YAAAA,IAAI,EAAEW;AAAlB,WAAR;AACF,SAJD,MAIK;AACD,cAAKA,cAAc,GAAG,CAAC,GAAGN,UAAJ,CAAtB;AACAM,UAAAA,cAAc,CAACJ,KAAD,CAAd,GAAwB;AAACG,YAAAA,GAAG,EAAEJ,WAAN;AAAmBM,YAAAA,MAAM,EAAC,CAACP,UAAU,CAACE,KAAD,CAAV,CAAkBK,MAA7C;AAAqDC,YAAAA,IAAI,EAAEC,IAAI,CAACC,GAAL,EAA3D;AAAuEC,YAAAA,KAAK,EAAC;AAA7E,WAAxB;AAEA,iBAAQ,EAAE,GAAGd,KAAL;AAAYF,YAAAA,IAAI,EAAEW;AAAlB,WAAR;AACH;AACJ;;AAED,SAAKd,aAAL;AAAmB;AACf,eAAO,EAAE,GAAGK,KAAL;AAAYF,UAAAA,IAAI,EAAEG,MAAM,CAACH,IAAP,CAAYC;AAA9B,SAAP;AACH;;AAED,SAAKH,uBAAL;AAA6B;AACzB,YAAIO,UAAU,GAAIH,KAAK,CAACF,IAAxB;AACAK,QAAAA,UAAU,CAACY,GAAX,CAAgBC,EAAD,IAAM;AACjBA,UAAAA,EAAE,CAACF,KAAH,GAAW,KAAX;AACA,iBAAOE,EAAP;AACH,SAHD;AAIA,eAAO,EAAE,GAAGhB,KAAL;AAAYF,UAAAA,IAAI,EAAEK;AAAlB,SAAP;AACH;;AAED;AACI,aAAOH,KAAP;AApCR;;AAuCA,SAAOA,KAAP;AACH,CAzCD;;AA2CA,eAAeD,UAAf","sourcesContent":["import { INIT_MY_FOLLOW, MY_FOLLOW, MY_FOLLOW_ALL, MY_FOLLOW_UPDATE_STATUS} from '../constants';\n\nconst initialState = {\n    data: []\n}\n\nconst my_follows = (state = initialState, action) => {\n    switch (action.type) {\n        case INIT_MY_FOLLOW:{\n            return initialState;\n        }\n\n        case MY_FOLLOW:{\n            let state_data  = state.data\n            let action_data = action.data;\n\n            let index = state_data.findIndex((obj => obj.nid == action_data));\n            if(index === -1){\n               let  new_state_data = [...state_data, {nid: action_data, status:true, date: Date.now(), local:true}]\n\n               return  { ...state, data: new_state_data }\n            }else{\n                let  new_state_data = [...state_data]\n                new_state_data[index] = {nid: action_data, status:!state_data[index].status, date: Date.now(), local:true}\n \n                return  { ...state, data: new_state_data }\n            }\n        }\n\n        case MY_FOLLOW_ALL:{\n            return { ...state, data: action.data.my_follows }\n        }\n\n        case MY_FOLLOW_UPDATE_STATUS:{\n            let state_data  = state.data\n            state_data.map((sd)=>{\n                sd.local = false;\n                return sd\n            })\n            return { ...state, data: state_data }\n        }\n\n        default:\n            return state;\n    }\n\n    return state;\n}\n\nexport default my_follows"]},"metadata":{},"sourceType":"module"}