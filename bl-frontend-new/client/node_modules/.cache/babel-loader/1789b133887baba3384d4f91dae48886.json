{"ast":null,"code":"var _jsxFileName = \"/app/src/pages/FollowsPage.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from 'react-redux';\nimport { useHistory } from \"react-router-dom\";\nimport Lightbox from \"react-image-lightbox\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MoreVertOutlinedIcon from '@material-ui/icons/MoreVertOutlined';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport UseMyFollowUpItem from \"./UseMyFollowUpItem\";\nimport { followUp } from '../actions/user';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst useHasChanged = val => {\n  _s();\n\n  const prevVal = usePrevious(val);\n  return prevVal !== val;\n};\n\n_s(useHasChanged, \"HoNKRQGo64iDpoe4UBQ72tkFRV0=\", false, function () {\n  return [usePrevious];\n});\n\nconst usePrevious = value => {\n  _s2();\n\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n\n_s2(usePrevious, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n\nconst MyFollowUpPage = props => {\n  _s3();\n\n  const history = useHistory();\n  const [followUp, setFollowUp] = useState([]);\n  const hasVal1Changed = useHasChanged(props.follow_ups);\n  useEffect(() => {\n    // if(prevFollowUp !== props.follow_ups){\n    //     console.log('MyFollowUpPage useEffect : props > ', props.follow_ups)\n    //     let follow_ups = props.follow_ups.filter((el)=>el.status);\n    //     setFollowUp(follow_ups)\n    // }\n    // console.log('MyFollowUpPage useEffect : props > ', prevFollowUp)\n    // let follow_ups = props.follow_ups.filter((el)=>el.status);\n    // setFollowUp(follow_ups)\n    if (hasVal1Changed) {\n      console.log(\"hasVal1Changed #1\");\n      let follow_ups = props.follow_ups.filter(el => el.status); // res = arr.filter(f => !brr.includes(f));\n      // data\n      // var arr = [1,2,3,4],\n      //     brr = [2,4],\n      //     res = arr.filter(f => brr.includes(f));\n      // console.log(\"res : \", res);\n      // \n\n      follow_ups = props.data.filter(el => follow_ups.some(ell => ell.id === el.id));\n      setFollowUp(follow_ups);\n    } else {\n      console.log(\"hasVal1Changed #2\");\n    }\n  });\n\n  const updateState = data => {\n    switch (Object.keys(data)[0]) {\n      case \"showModalLogin\":\n        {\n          // setShowModalLogin(Object.values(data)[0])\n          break;\n        }\n\n      case \"showModalReport\":\n        {\n          // setShowModalReport(Object.values(data)[0])\n          break;\n        }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mb-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row d-flex flex-row py-5\",\n      children: followUp.map(item => /*#__PURE__*/_jsxDEV(UseMyFollowUpItem, { ...props,\n        item: item,\n        updateState: updateState,\n        followUp: data => {\n          props.followUp(data);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 13\n  }, this);\n};\n\n_s3(MyFollowUpPage, \"vVq4CDUb6BFJTvjJXwvXN0GY5SA=\", false, function () {\n  return [useHistory, useHasChanged];\n});\n\n_c = MyFollowUpPage;\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    user: state.user.data,\n    follow_ups: state.user.follow_ups,\n    data: state.app.data,\n    maintenance: state.setting.maintenance\n  };\n};\n\nconst mapDispatchToProps = {\n  followUp\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(MyFollowUpPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"MyFollowUpPage\");","map":{"version":3,"sources":["/app/src/pages/FollowsPage.js"],"names":["React","useEffect","useState","useRef","connect","useHistory","Lightbox","MenuItem","Menu","MoreVertOutlinedIcon","LazyLoadImage","UseMyFollowUpItem","followUp","useHasChanged","val","prevVal","usePrevious","value","ref","current","MyFollowUpPage","props","history","setFollowUp","hasVal1Changed","follow_ups","console","log","filter","el","status","data","some","ell","id","updateState","Object","keys","map","item","mapStateToProps","state","ownProps","user","app","maintenance","setting","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from 'react-redux'\nimport { useHistory } from \"react-router-dom\";\n\nimport Lightbox from \"react-image-lightbox\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\n\nimport MoreVertOutlinedIcon from '@material-ui/icons/MoreVertOutlined';\n\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\n\nimport UseMyFollowUpItem from \"./UseMyFollowUpItem\";\nimport { followUp } from '../actions/user';\n\nconst useHasChanged= (val) => {\n    const prevVal = usePrevious(val)\n    return prevVal !== val\n}\n\nconst usePrevious = (value) => {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n}\n\nconst MyFollowUpPage = (props) => {\n    const history = useHistory();\n\n    const [followUp, setFollowUp]     = useState([]);\n    const hasVal1Changed = useHasChanged(props.follow_ups)\n\n    useEffect(() => {\n        // if(prevFollowUp !== props.follow_ups){\n        //     console.log('MyFollowUpPage useEffect : props > ', props.follow_ups)\n\n        //     let follow_ups = props.follow_ups.filter((el)=>el.status);\n        //     setFollowUp(follow_ups)\n        // }\n\n        // console.log('MyFollowUpPage useEffect : props > ', prevFollowUp)\n\n        // let follow_ups = props.follow_ups.filter((el)=>el.status);\n        // setFollowUp(follow_ups)\n        \n        if(hasVal1Changed){\n            console.log(\"hasVal1Changed #1\")\n            let follow_ups = props.follow_ups.filter((el)=>el.status);\n            \n\n\n            // res = arr.filter(f => !brr.includes(f));\n\n            // data\n\n            // var arr = [1,2,3,4],\n            //     brr = [2,4],\n            //     res = arr.filter(f => brr.includes(f));\n            // console.log(\"res : \", res);\n// \n            follow_ups = props.data.filter(el => follow_ups.some(ell => ell.id === el.id) );\n            setFollowUp(follow_ups)\n        }else{\n            console.log(\"hasVal1Changed #2\")\n        }\n    });\n\n    const updateState = data => {\n        switch(Object.keys(data)[0]){\n          case \"showModalLogin\":{\n            // setShowModalLogin(Object.values(data)[0])\n            break;\n          }\n          case \"showModalReport\":{\n            // setShowModalReport(Object.values(data)[0])\n            break;\n          }\n        }\n    }\n  \n    return (<div className=\"container mb-5\">\n                <div className=\"row d-flex flex-row py-5\"> \n                {\n                followUp.map(item => (\n                    <UseMyFollowUpItem \n                        {...props} \n                        item={item}\n                        updateState={updateState}\n                        followUp={(data)=>{\n                            props.followUp(data)\n                        }}/>\n                ))\n                }\n                </div>\n            </div>)\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n        user: state.user.data,\n        follow_ups: state.user.follow_ups,\n        data: state.app.data,\n\n        maintenance: state.setting.maintenance\n    };\n}\n\nconst mapDispatchToProps = {\n    followUp,\n}\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(MyFollowUpPage)"]},"metadata":{},"sourceType":"module"}