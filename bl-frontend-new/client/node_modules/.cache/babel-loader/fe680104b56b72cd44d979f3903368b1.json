{"ast":null,"code":"import { USER_LOGIN, USER_LOGOUT, FETCH_PROFILE, FOLLOW_UP, ___FOLLOW_UP, FETCH_MY_APPS, ADD_HISTORY, DELETE_HISTORY, ADD_FOLLOWER_POST, FOLLOWER_POST, NET_INFO, NOTIFICATIONS, LOADING_OVERLAY, CLEAR_CACHED, ADD_MY_APPS } from '../constants';\nimport { isEmpty } from '../utils';\nexport const mergeArrays = (...arrays) => {\n  let jointArray = [];\n  arrays.forEach(array => {\n    jointArray = [...jointArray, ...array];\n  });\n  const uniqueArray = jointArray.reduce((newArray, item) => {\n    if (newArray.includes(item)) {\n      return newArray;\n    } else {\n      return [...newArray, item];\n    }\n  }, []);\n  return uniqueArray;\n};\nexport const mergeArraysId = (...arrays) => {\n  let jointArray = [];\n  arrays.forEach(array => {\n    jointArray = [...jointArray, ...array];\n  });\n  const uniqueArray = jointArray.reduce((newArray, item) => {\n    let found = newArray.find(({\n      id\n    }) => id === item.id);\n\n    if (found) {\n      return newArray;\n    } else {\n      return [...newArray, item];\n    }\n  }, []);\n  return uniqueArray;\n};\nconst initialState = {\n  data: {},\n  profile: [],\n  follow_ups: [],\n  ___follow_ups: [],\n  // my_apps: [],\n  historys: [],\n  follower_post: [],\n  net_info: {},\n  notifications: [],\n  is_loading_overlay: false\n};\n\nconst user = (state = initialState, action) => {\n  // console.log('user >>>>> ' , action.type, action.data);\n  switch (action.type) {\n    case USER_LOGIN:\n      {\n        return { ...state,\n          data: action.data\n        };\n      }\n\n    case USER_LOGOUT:\n      {\n        return initialState;\n      }\n\n    case CLEAR_CACHED:\n      {\n        return initialState;\n      }\n\n    case FETCH_PROFILE:\n      {\n        return { ...state,\n          data: { ...state.data,\n            ...action.data\n          }\n        };\n      }\n\n    case FOLLOW_UP:\n      {\n        let follow_ups = state.follow_ups;\n        let data = action.data;\n\n        if (isEmpty(follow_ups.find(item => item.id === data.id))) {\n          follow_ups = [...follow_ups, {\n            \"id\": data.id,\n            \"local\": true,\n            \"status\": true,\n            \"owner_id\": data.owner_id,\n            \"date\": Date.now()\n          }];\n        } else {\n          follow_ups = follow_ups.map(el => el.id === data.id ? { ...el,\n            \"status\": !el.status\n          } : el);\n        }\n        /*\n         ___followUp({\"id\": item.id, \n                                \"local\": true, \n                                \"follow_up\": follow_up, \n                                \"unique_id\": getUniqueId(), \n                                \"owner_id\": item.owner_id, \n                                \"date\": Date.now()}, 0);\n        */\n\n\n        return { ...state,\n          follow_ups\n        };\n      }\n\n    case ___FOLLOW_UP:\n      {\n        if (action.mode == 0) {\n          let ___follow_ups = mergeArraysId([action.data], state.___follow_ups);\n\n          return { ...state,\n            ___follow_ups\n          };\n        } else if (action.mode == 1) {\n          let ___follow_ups = mergeArraysId(action.data, state.___follow_ups);\n\n          return { ...state,\n            ___follow_ups\n          };\n        }\n\n        return state;\n      }\n\n    case NOTIFICATIONS:\n      {\n        let notifications = mergeArraysId(action.data, state.notifications);\n        return { ...state,\n          notifications\n        };\n      }\n    // case ADD_MY_APPS:{\n    //   return { ...state, my_apps: action.data }\n    // }\n    // case FETCH_MY_APPS: {\n    //   return {\n    //     ...state, my_apps: action.data\n    //   }\n    // }\n\n    case ADD_HISTORY:\n      {\n        let historys = state.historys.filter(item => {\n          return item.search_text !== action.data.search_text;\n        });\n        historys.splice(0, 0, action.data);\n        return { ...state,\n          historys\n        };\n      }\n\n    case DELETE_HISTORY:\n      {\n        let historys = state.historys.filter(item => {\n          return item.search_text !== action.data.search_text;\n        });\n        return { ...state,\n          historys\n        };\n      }\n\n    case ADD_FOLLOWER_POST:\n      {\n        return { ...state,\n          follower_post: action.data\n        };\n      }\n\n    case FOLLOWER_POST:\n      {\n        let follower_post = state.follower_post.filter(item => {\n          return item.post_id !== action.data.post_id;\n        });\n        return { ...state,\n          follower_post: [...follower_post, action.data]\n        };\n      }\n\n    case NET_INFO:\n      {\n        return { ...state,\n          net_info: action.data\n        };\n      }\n\n    case LOADING_OVERLAY:\n      {\n        return { ...state,\n          is_loading_overlay: action.data\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default user;","map":{"version":3,"sources":["/app/src/reducers/user.js"],"names":["USER_LOGIN","USER_LOGOUT","FETCH_PROFILE","FOLLOW_UP","___FOLLOW_UP","FETCH_MY_APPS","ADD_HISTORY","DELETE_HISTORY","ADD_FOLLOWER_POST","FOLLOWER_POST","NET_INFO","NOTIFICATIONS","LOADING_OVERLAY","CLEAR_CACHED","ADD_MY_APPS","isEmpty","mergeArrays","arrays","jointArray","forEach","array","uniqueArray","reduce","newArray","item","includes","mergeArraysId","found","find","id","initialState","data","profile","follow_ups","___follow_ups","historys","follower_post","net_info","notifications","is_loading_overlay","user","state","action","type","owner_id","Date","now","map","el","status","mode","filter","search_text","splice","post_id"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,WAArB,EAAkCC,aAAlC,EACSC,SADT,EACoBC,YADpB,EACkCC,aADlC,EACiDC,WADjD,EAESC,cAFT,EAEyBC,iBAFzB,EAE4CC,aAF5C,EAGSC,QAHT,EAGmBC,aAHnB,EAISC,eAJT,EAI0BC,YAJ1B,EAMSC,WANT,QAM2B,cAN3B;AAOA,SAASC,OAAT,QAAwB,UAAxB;AAEA,OAAO,MAAOC,WAAW,GAAG,CAAC,GAAGC,MAAJ,KAAe;AACzC,MAAIC,UAAU,GAAG,EAAjB;AAEAD,EAAAA,MAAM,CAACE,OAAP,CAAeC,KAAK,IAAI;AACpBF,IAAAA,UAAU,GAAG,CAAC,GAAGA,UAAJ,EAAgB,GAAGE,KAAnB,CAAb;AACH,GAFD;AAGA,QAAMC,WAAW,GAAGH,UAAU,CAACI,MAAX,CAAkB,CAACC,QAAD,EAAWC,IAAX,KAAmB;AACvD,QAAID,QAAQ,CAACE,QAAT,CAAkBD,IAAlB,CAAJ,EAA4B;AAC1B,aAAOD,QAAP;AACD,KAFD,MAEO;AACL,aAAO,CAAC,GAAGA,QAAJ,EAAcC,IAAd,CAAP;AACD;AACF,GANmB,EAMjB,EANiB,CAApB;AAOA,SAAOH,WAAP;AACD,CAdM;AAgBP,OAAO,MAAOK,aAAa,GAAG,CAAC,GAAGT,MAAJ,KAAe;AAC3C,MAAIC,UAAU,GAAG,EAAjB;AAEAD,EAAAA,MAAM,CAACE,OAAP,CAAeC,KAAK,IAAI;AACpBF,IAAAA,UAAU,GAAG,CAAC,GAAGA,UAAJ,EAAgB,GAAGE,KAAnB,CAAb;AACH,GAFD;AAGA,QAAMC,WAAW,GAAGH,UAAU,CAACI,MAAX,CAAkB,CAACC,QAAD,EAAWC,IAAX,KAAmB;AACrD,QAAIG,KAAK,GAAGJ,QAAQ,CAACK,IAAT,CAAc,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAYA,EAAE,KAAKL,IAAI,CAACK,EAAtC,CAAZ;;AACA,QAAIF,KAAJ,EAAU;AACN,aAAOJ,QAAP;AACH,KAFD,MAEO;AACH,aAAO,CAAC,GAAGA,QAAJ,EAAcC,IAAd,CAAP;AACH;AACJ,GAPmB,EAOjB,EAPiB,CAApB;AAQA,SAAOH,WAAP;AACD,CAfM;AAiBP,MAAMS,YAAY,GAAG;AACnBC,EAAAA,IAAI,EAAE,EADa;AAEnBC,EAAAA,OAAO,EAAE,EAFU;AAGnBC,EAAAA,UAAU,EAAE,EAHO;AAInBC,EAAAA,aAAa,EAAE,EAJI;AAKnB;AACAC,EAAAA,QAAQ,EAAE,EANS;AAOnBC,EAAAA,aAAa,EAAE,EAPI;AASnBC,EAAAA,QAAQ,EAAC,EATU;AAWnBC,EAAAA,aAAa,EAAC,EAXK;AAanBC,EAAAA,kBAAkB,EAAC;AAbA,CAArB;;AAgBA,MAAMC,IAAI,GAAG,CAACC,KAAK,GAAGX,YAAT,EAAuBY,MAAvB,KAAkC;AAE7C;AACA,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK3C,UAAL;AAAgB;AACd,eAAO,EAAC,GAAGyC,KAAJ;AAAWV,UAAAA,IAAI,EAAEW,MAAM,CAACX;AAAxB,SAAP;AACD;;AAED,SAAK9B,WAAL;AAAkB;AAChB,eAAO6B,YAAP;AACD;;AAED,SAAKjB,YAAL;AAAmB;AACjB,eAAOiB,YAAP;AACD;;AAED,SAAK5B,aAAL;AAAmB;AACjB,eAAO,EAAC,GAAGuC,KAAJ;AAAWV,UAAAA,IAAI,EAAE,EAAC,GAAGU,KAAK,CAACV,IAAV;AAAgB,eAAGW,MAAM,CAACX;AAA1B;AAAjB,SAAP;AACD;;AAED,SAAK5B,SAAL;AAAgB;AACd,YAAI8B,UAAU,GAAGQ,KAAK,CAACR,UAAvB;AACA,YAAIF,IAAI,GAAGW,MAAM,CAACX,IAAlB;;AACA,YAAGhB,OAAO,CAACkB,UAAU,CAACL,IAAX,CAAiBJ,IAAD,IAAQA,IAAI,CAACK,EAAL,KAAYE,IAAI,CAACF,EAAzC,CAAD,CAAV,EAAyD;AACvDI,UAAAA,UAAU,GAAG,CAAC,GAAGA,UAAJ,EAAgB;AAAC,kBAAMF,IAAI,CAACF,EAAZ;AACC,qBAAS,IADV;AAEC,sBAAU,IAFX;AAGC,wBAAYE,IAAI,CAACa,QAHlB;AAIC,oBAAQC,IAAI,CAACC,GAAL;AAJT,WAAhB,CAAb;AAMD,SAPD,MAOK;AACHb,UAAAA,UAAU,GAAGA,UAAU,CAACc,GAAX,CAAeC,EAAE,IAAKA,EAAE,CAACnB,EAAH,KAAUE,IAAI,CAACF,EAAf,GAAoB,EAAC,GAAGmB,EAAJ;AAAQ,sBAAU,CAACA,EAAE,CAACC;AAAtB,WAApB,GAAoDD,EAA1E,CAAb;AACD;AACD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;;AACM,eAAO,EAAC,GAAGP,KAAJ;AAAWR,UAAAA;AAAX,SAAP;AACD;;AAED,SAAK7B,YAAL;AAAkB;AAChB,YAAGsC,MAAM,CAACQ,IAAP,IAAe,CAAlB,EAAoB;AAClB,cAAIhB,aAAa,GAAGR,aAAa,CAAC,CAACgB,MAAM,CAACX,IAAR,CAAD,EAAgBU,KAAK,CAACP,aAAtB,CAAjC;;AACA,iBAAO,EACL,GAAGO,KADE;AACKP,YAAAA;AADL,WAAP;AAGD,SALD,MAKM,IAAGQ,MAAM,CAACQ,IAAP,IAAe,CAAlB,EAAoB;AACxB,cAAIhB,aAAa,GAAGR,aAAa,CAACgB,MAAM,CAACX,IAAR,EAAcU,KAAK,CAACP,aAApB,CAAjC;;AACA,iBAAO,EACL,GAAGO,KADE;AACKP,YAAAA;AADL,WAAP;AAGD;;AACD,eAAOO,KAAP;AACD;;AAED,SAAK9B,aAAL;AAAoB;AAClB,YAAI2B,aAAa,GAAGZ,aAAa,CAACgB,MAAM,CAACX,IAAR,EAAcU,KAAK,CAACH,aAApB,CAAjC;AACA,eAAO,EACL,GAAGG,KADE;AACKH,UAAAA;AADL,SAAP;AAGD;AAED;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAKhC,WAAL;AAAkB;AAEhB,YAAI6B,QAAQ,GAAGM,KAAK,CAACN,QAAN,CAAegB,MAAf,CAAuB3B,IAAD,IAAQ;AAAE,iBAAOA,IAAI,CAAC4B,WAAL,KAAqBV,MAAM,CAACX,IAAP,CAAYqB,WAAxC;AAAqD,SAArF,CAAf;AACAjB,QAAAA,QAAQ,CAACkB,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,EAAsBX,MAAM,CAACX,IAA7B;AAEA,eAAO,EAAE,GAAGU,KAAL;AAAYN,UAAAA;AAAZ,SAAP;AACD;;AAED,SAAK5B,cAAL;AAAqB;AACnB,YAAI4B,QAAQ,GAAGM,KAAK,CAACN,QAAN,CAAegB,MAAf,CAAuB3B,IAAD,IAAQ;AAAE,iBAAOA,IAAI,CAAC4B,WAAL,KAAqBV,MAAM,CAACX,IAAP,CAAYqB,WAAxC;AAAqD,SAArF,CAAf;AACA,eAAO,EAAE,GAAGX,KAAL;AAAYN,UAAAA;AAAZ,SAAP;AACD;;AAED,SAAK3B,iBAAL;AAAwB;AACtB,eAAO,EAAE,GAAGiC,KAAL;AAAYL,UAAAA,aAAa,EAACM,MAAM,CAACX;AAAjC,SAAP;AACD;;AAED,SAAKtB,aAAL;AAAoB;AAClB,YAAI2B,aAAa,GAAGK,KAAK,CAACL,aAAN,CAAoBe,MAApB,CAA4B3B,IAAD,IAAQ;AAAE,iBAAOA,IAAI,CAAC8B,OAAL,KAAiBZ,MAAM,CAACX,IAAP,CAAYuB,OAApC;AAA6C,SAAlF,CAApB;AACA,eAAO,EAAE,GAAGb,KAAL;AAAYL,UAAAA,aAAa,EAAC,CAAC,GAAGA,aAAJ,EAAmBM,MAAM,CAACX,IAA1B;AAA1B,SAAP;AACD;;AAED,SAAKrB,QAAL;AAAe;AACb,eAAO,EAAE,GAAG+B,KAAL;AAAYJ,UAAAA,QAAQ,EAACK,MAAM,CAACX;AAA5B,SAAP;AACD;;AAED,SAAKnB,eAAL;AAAqB;AACnB,eAAO,EAAE,GAAG6B,KAAL;AAAYF,UAAAA,kBAAkB,EAACG,MAAM,CAACX;AAAtC,SAAP;AACD;;AAGD;AACE,aAAOU,KAAP;AAzGJ;AA2GD,CA9GD;;AAgHA,eAAeD,IAAf","sourcesContent":["import { USER_LOGIN, USER_LOGOUT, FETCH_PROFILE, \n         FOLLOW_UP, ___FOLLOW_UP, FETCH_MY_APPS, ADD_HISTORY, \n         DELETE_HISTORY, ADD_FOLLOWER_POST, FOLLOWER_POST, \n         NET_INFO, NOTIFICATIONS,\n         LOADING_OVERLAY, CLEAR_CACHED,\n        \n         ADD_MY_APPS} from '../constants';\nimport { isEmpty } from '../utils';\n\nexport const  mergeArrays = (...arrays) => {\n  let jointArray = []\n\n  arrays.forEach(array => {\n      jointArray = [...jointArray, ...array]\n  })\n  const uniqueArray = jointArray.reduce((newArray, item) =>{\n    if (newArray.includes(item)){\n      return newArray\n    } else {\n      return [...newArray, item]\n    }\n  }, [])\n  return uniqueArray\n}\n\nexport const  mergeArraysId = (...arrays) => {\n  let jointArray = []\n\n  arrays.forEach(array => {\n      jointArray = [...jointArray, ...array]\n  })\n  const uniqueArray = jointArray.reduce((newArray, item) =>{\n      let found = newArray.find(({ id }) => id === item.id);\n      if (found){\n          return newArray\n      } else {\n          return [...newArray, item]\n      }\n  }, [])\n  return uniqueArray\n}\n\nconst initialState = {\n  data: {},\n  profile: [],\n  follow_ups: [],\n  ___follow_ups: [],\n  // my_apps: [],\n  historys: [],\n  follower_post: [],\n\n  net_info:{},\n\n  notifications:[],\n\n  is_loading_overlay:false\n}\n\nconst user = (state = initialState, action) => {\n\n  // console.log('user >>>>> ' , action.type, action.data);\n  switch (action.type) {\n    case USER_LOGIN:{\n      return {...state, data: action.data}\n    }\n    \n    case USER_LOGOUT: {\n      return initialState\n    }\n\n    case CLEAR_CACHED: {\n      return initialState\n    }\n\n    case FETCH_PROFILE:{\n      return {...state, data: {...state.data, ...action.data} }\n    }\n\n    case FOLLOW_UP: {\n      let follow_ups = state.follow_ups\n      let data = action.data\n      if(isEmpty(follow_ups.find((item)=>item.id === data.id))){\n        follow_ups = [...follow_ups, {\"id\": data.id, \n                                      \"local\": true, \n                                      \"status\": true,\n                                      \"owner_id\": data.owner_id, \n                                      \"date\": Date.now()\n                                    }]\n      }else{\n        follow_ups = follow_ups.map(el => (el.id === data.id ? {...el, \"status\": !el.status} : el))\n      }\n      /*\n       ___followUp({\"id\": item.id, \n                              \"local\": true, \n                              \"follow_up\": follow_up, \n                              \"unique_id\": getUniqueId(), \n                              \"owner_id\": item.owner_id, \n                              \"date\": Date.now()}, 0);\n      */\n      return {...state, follow_ups}\n    }\n\n    case ___FOLLOW_UP:{\n      if(action.mode == 0){\n        let ___follow_ups = mergeArraysId([action.data], state.___follow_ups)\n        return {\n          ...state, ___follow_ups\n        }\n      }else if(action.mode == 1){\n        let ___follow_ups = mergeArraysId(action.data, state.___follow_ups)\n        return {\n          ...state, ___follow_ups\n        }\n      }\n      return state;\n    }\n\n    case NOTIFICATIONS: {\n      let notifications = mergeArraysId(action.data, state.notifications)\n      return {\n        ...state, notifications\n      }\n    }\n\n    // case ADD_MY_APPS:{\n    //   return { ...state, my_apps: action.data }\n    // }\n\n    // case FETCH_MY_APPS: {\n    //   return {\n    //     ...state, my_apps: action.data\n    //   }\n    // }\n\n    case ADD_HISTORY: {\n\n      let historys = state.historys.filter((item)=>{ return item.search_text !== action.data.search_text })\n      historys.splice(0, 0, action.data);\n\n      return { ...state, historys }\n    }\n\n    case DELETE_HISTORY: {\n      let historys = state.historys.filter((item)=>{ return item.search_text !== action.data.search_text })\n      return { ...state, historys }\n    }\n\n    case ADD_FOLLOWER_POST: {\n      return { ...state, follower_post:action.data }\n    }\n\n    case FOLLOWER_POST: {\n      let follower_post = state.follower_post.filter((item)=>{ return item.post_id !== action.data.post_id })\n      return { ...state, follower_post:[...follower_post, action.data] }\n    }\n\n    case NET_INFO: {\n      return { ...state, net_info:action.data}\n    }\n\n    case LOADING_OVERLAY:{\n      return { ...state, is_loading_overlay:action.data}\n    }\n\n   \n    default:\n      return state;\n  }\n}\n\nexport default user"]},"metadata":{},"sourceType":"module"}