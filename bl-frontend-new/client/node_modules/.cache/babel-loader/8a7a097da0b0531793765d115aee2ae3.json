{"ast":null,"code":"var _jsxFileName = \"/app/src/pages/LogoutDialog.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useHistory } from \"react-router-dom\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport ls from 'local-storage';\nimport { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport { userLogout } from '../actions/user';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LogoutDialog = props => {\n  _s();\n\n  const history = useHistory();\n  const [showModal, setShowModal] = React.useState();\n  const [logoutLoading, setLogoutLoading] = React.useState();\n  useEffect(() => {\n    setShowModal(false);\n    setLogoutLoading(false);\n    return () => {\n      setShowModal();\n      setLogoutLoading();\n    };\n  }, []);\n  useEffect(() => {\n    setShowModal(props.showModalLogout);\n  }, [props.showModalLogout]);\n\n  const handleLogout = async e => {\n    setLogoutLoading(true);\n    let response = await axios.post(`/api/v1/logout`);\n    response = response.data;\n    console.log(\"/api/v1/logout : response = xx \", response); // if(response.result){\n\n    props.onClose();\n    ls.remove('basic_auth');\n    ls.remove('session');\n    props.userLogout();\n    setLogoutLoading(false);\n    history.push({\n      pathname: `/`,\n      state: {}\n    });\n  };\n\n  const handleClose = e => {\n    props.onClose();\n  };\n\n  const bodyContent = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Comfirm Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 16\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      onHide: props.onClose // onSubmit={handleSubmit}\n      // bsSize=\"large\"\n      ,\n      backdrop: \"static\",\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Comfirm Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: bodyContent()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleLogout,\n          children: [\"Logout \", logoutLoading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 15\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 91\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n\n_s(LogoutDialog, \"krGI453jKyHv95h7p3e/69+F9nk=\", false, function () {\n  return [useHistory];\n});\n\n_c = LogoutDialog;\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    user: state.user.data,\n    maintenance: state.setting.maintenance\n  };\n};\n\nconst mapDispatchToProps = {\n  userLogout\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(LogoutDialog);\n\nvar _c;\n\n$RefreshReg$(_c, \"LogoutDialog\");","map":{"version":3,"sources":["/app/src/pages/LogoutDialog.js"],"names":["React","useState","useEffect","connect","useHistory","Modal","Button","ls","CircularProgress","axios","userLogout","LogoutDialog","props","history","showModal","setShowModal","logoutLoading","setLogoutLoading","showModalLogout","handleLogout","e","response","post","data","console","log","onClose","remove","push","pathname","state","handleClose","bodyContent","mapStateToProps","ownProps","user","maintenance","setting","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux'\nimport { useHistory } from \"react-router-dom\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport ls from 'local-storage';\nimport { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\n\nimport { userLogout } from '../actions/user';\n\nconst LogoutDialog = (props) => {\n    const history = useHistory();\n    const [showModal, setShowModal] = React.useState();\n\n    const [logoutLoading, setLogoutLoading] = React.useState();\n\n    useEffect(() => {\n        setShowModal(false)\n        setLogoutLoading(false)\n\n        return () => {\n            setShowModal()\n            setLogoutLoading()\n        };\n    }, []);\n\n\n    useEffect(() => {\n        setShowModal(props.showModalLogout)\n\n    }, [props.showModalLogout]);\n\n    const handleLogout = async(e) => {\n        setLogoutLoading(true)\n\n\n        let response =  await axios.post(`/api/v1/logout`);\n\n        response = response.data\n\n        console.log(\"/api/v1/logout : response = xx \", response)\n\n        \n        // if(response.result){\n\n        props.onClose()\n\n        ls.remove('basic_auth')\n        ls.remove('session')\n\n        props.userLogout()\n\n        setLogoutLoading(false)\n\n        history.push({pathname: `/`, state: {} })\n    }\n\n    const handleClose = (e) => {\n        props.onClose()\n    }\n\n    const bodyContent =()=>{\n        return(<div>Comfirm Logout</div>)\n    }\n\n    return (\n        <div>\n        <Modal\n            show={showModal}\n            onHide={props.onClose}\n            // onSubmit={handleSubmit}\n            // bsSize=\"large\"\n            backdrop=\"static\">\n            <Modal.Header closeButton={true}>\n                <h2>Comfirm Logout</h2>\n            </Modal.Header>\n            <Modal.Body>\n                {bodyContent()}\n            </Modal.Body>\n            <Modal.Footer>\n                <Button variant=\"secondary\" onClick={handleClose}>Close</Button>\n                <Button variant=\"primary\" onClick={handleLogout}>Logout {logoutLoading && <CircularProgress size={15}/> }</Button>\n            </Modal.Footer>\n        </Modal>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n        user: state.user.data,\n        maintenance: state.setting.maintenance\n    }\n}\n\nconst mapDispatchToProps = {\n  userLogout\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LogoutDialog)"]},"metadata":{},"sourceType":"module"}