{"ast":null,"code":"var _jsxFileName = \"/app/src/pages/HeaderBar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { connect } from 'react-redux';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport Typography from '@material-ui/core/Typography';\nimport { useHistory } from \"react-router-dom\";\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport { toast } from \"react-toastify\";\nimport { isEmpty } from '../utils';\nimport { userLogout, loadingOverlay, clearCached } from '../actions/user';\nimport LogoutDialog from './LogoutDialog';\nimport LoginDialog from './LoginDialog';\nimport previewIcon from '../images/preview-icon.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _ = require('lodash');\n\nconst HeaderBar = props => {\n  _s();\n\n  const history = useHistory();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [showModal, setShowModal] = React.useState(false);\n  const [showModalLogout, setShowModalLogout] = React.useState(false);\n  const [loadingOverlay, setLoadingOverlay] = React.useState(false);\n  const [follows, setFollows] = React.useState(0);\n  useEffect(() => {\n    if (!_.isEmpty(props.follows)) {\n      setFollows(props.follows.filter(el => el.status));\n    }\n  }, [props.follows]);\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      flexGrow: 1\n    },\n    children: /*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          style: {\n            flexGrow: 1,\n            color: 'white'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => {\n              history.push({\n                pathname: `/`,\n                state: {}\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                cursor: 'pointer'\n              },\n              children: [\"Banlist.info \", _.isEmpty(props.socket_data) ? '[Disconnect]' : \"[Connected]\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 20\n        }, this), props.maintenance ? /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: _.isEmpty(props.user) ? /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"flex-container row\",\n              children: /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex-item\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    cursor: 'pointer'\n                  },\n                  onClick: () => {\n                    setShowModal(true);\n                  },\n                  children: \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 65,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 53\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 54\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"flex-container row\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex-item\",\n                children: [/*#__PURE__*/_jsxDEV(NotificationsIcon, {\n                  className: \"notifications-icon\",\n                  onClick: () => {\n                    history.push({\n                      pathname: `/notifications`,\n                      state: {}\n                    });\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 57\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"notifications-span\",\n                  children: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 57\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex-item\",\n                children: /*#__PURE__*/_jsxDEV(LazyLoadImage, {\n                  className: \"lazy-load-image-border-radius\",\n                  alt: 'image.alt',\n                  width: \"40px\",\n                  height: \"40px\",\n                  effect: \"blur\",\n                  onClick: handleClick,\n                  placeholderSrc: previewIcon,\n                  src: props.user.image_url\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 55\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 51\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(Menu, {\n            keepMounted: true,\n            anchorEl: anchorEl,\n            onClose: handleClose,\n            open: Boolean(anchorEl),\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              onClick: () => {\n                history.push({\n                  pathname: `/my-profile`,\n                  state: {}\n                });\n                setAnchorEl(null);\n              },\n              children: \"My Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              onClick: () => {\n                history.push({\n                  pathname: `/new-post`,\n                  state: {}\n                });\n                setAnchorEl(null);\n              },\n              children: \"New post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              onClick: () => {\n                history.push({\n                  pathname: `/my-profile/my-post`,\n                  state: {}\n                });\n                setAnchorEl(null);\n              },\n              children: [\"Posts \", props.my_apps.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              onClick: () => {\n                history.push({\n                  pathname: `/my-profile/follows`,\n                  state: {}\n                });\n                setAnchorEl(null);\n              },\n              children: [\"Follows \", follows.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              onClick: () => {\n                setShowModalLogout(true);\n                setAnchorEl(null);\n              },\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(LoginDialog, {\n            showModal: showModal,\n            mode: \"login\",\n            onClose: () => {\n              setShowModal(false);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(LogoutDialog, {\n            showModalLogout: showModalLogout,\n            onClose: () => {\n              setShowModalLogout(false);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 18\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 16\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n\n_s(HeaderBar, \"9WU11mjV4QO4mu7rqh8ldhizTjU=\", false, function () {\n  return [useHistory];\n});\n\n_c = HeaderBar;\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    user: state.user.data,\n    data: state.app.data,\n    follows: state.app.follows,\n    follow_ups: state.user.follow_ups,\n    my_apps: state.my_apps.data,\n    maintenance: state.setting.maintenance,\n    socket_data: state.socket.data\n  };\n};\n\nconst mapDispatchToProps = {\n  userLogout,\n  loadingOverlay,\n  clearCached\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderBar);\n\nvar _c;\n\n$RefreshReg$(_c, \"HeaderBar\");","map":{"version":3,"sources":["/app/src/pages/HeaderBar.js"],"names":["React","useEffect","connect","AppBar","Toolbar","MenuItem","Menu","Typography","useHistory","NotificationsIcon","LazyLoadImage","toast","isEmpty","userLogout","loadingOverlay","clearCached","LogoutDialog","LoginDialog","previewIcon","_","require","HeaderBar","props","history","anchorEl","setAnchorEl","useState","showModal","setShowModal","showModalLogout","setShowModalLogout","setLoadingOverlay","follows","setFollows","filter","el","status","handleClose","handleClick","event","currentTarget","flexGrow","color","push","pathname","state","cursor","socket_data","maintenance","user","image_url","Boolean","my_apps","length","mapStateToProps","ownProps","data","app","follow_ups","setting","socket","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { connect } from 'react-redux'\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport Typography from '@material-ui/core/Typography';\nimport { useHistory } from \"react-router-dom\";\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport { toast }    from \"react-toastify\";\n\nimport {isEmpty} from '../utils'\nimport { userLogout, loadingOverlay, clearCached } from '../actions/user';\nimport LogoutDialog from './LogoutDialog'\nimport LoginDialog from './LoginDialog'\nimport previewIcon from '../images/preview-icon.png';\n\n\nvar _ = require('lodash');\n\nconst HeaderBar = (props) => {\n  const history = useHistory();\n  const [anchorEl, setAnchorEl]               = React.useState(null);\n  const [showModal, setShowModal]             = React.useState(false);\n  const [showModalLogout, setShowModalLogout] = React.useState(false);\n  const [loadingOverlay, setLoadingOverlay]   = React.useState(false);\n\n  const [follows, setFollows]     = React.useState(0);\n\n  useEffect(() => {\n\n    if(!_.isEmpty(props.follows)){\n      setFollows(props.follows.filter((el)=>el.status))\n    }\n    \n  },[props.follows]);\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  \n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  return (\n    <div style={{flexGrow: 1}}>\n               <AppBar position=\"static\">\n                 <Toolbar>\n                   <Typography variant=\"h6\" style={{flexGrow: 1, color: 'white'}}>\n                    <div  onClick={()=>{ history.push({pathname: `/`, state: {} }) }}>\n                      <span style={{cursor:'pointer'}} >Banlist.info {_.isEmpty(props.socket_data)? '[Disconnect]' : \"[Connected]\"}</span>\n                    </div>\n                   </Typography>\n\n                   {\n                     props.maintenance \n                     ?  <div />\n                     :  <div>\n                          <div>\n      \n                          {  _.isEmpty(props.user) ? <ul className=\"flex-container row\">\n                                                    <li className=\"flex-item\">\n                                                    <div \n                                                      style={{cursor:'pointer'}}\n                                                      onClick={()=>{\n                                                        setShowModal(true)\n                                                      }}>\n                                                      เข้าสู่ระบบ\n                                                    </div>\n                                                  </li> \n                                                  </ul>\n                                                : <ul className=\"flex-container row\">\n                                                    <li className=\"flex-item\">\n                                                        <NotificationsIcon \n                                                          className=\"notifications-icon\"\n                                                          onClick={()=>{\n                                                            history.push({pathname: `/notifications`, state: {} })\n                                                          }} />\n                                                        <span className=\"notifications-span\">1</span>\n                                                    </li>\n                                                    <li className=\"flex-item\">\n                                                      <LazyLoadImage\n                                                        className=\"lazy-load-image-border-radius\"\n                                                        alt={'image.alt'}\n                                                        width=\"40px\"\n                                                        height=\"40px\"\n                                                        effect=\"blur\"\n                                                        onClick={handleClick}\n                                                        placeholderSrc={previewIcon}\n                                                        src={props.user.image_url} \n                                                        />\n                                                    </li>\n                                                  </ul>\n                                                  }\n                          </div>\n                          <Menu\n                            keepMounted\n                            anchorEl={anchorEl}\n                            onClose={handleClose}\n                            open={Boolean(anchorEl)}>\n                            <MenuItem \n                              onClick={()=>{\n                                history.push({pathname: `/my-profile`, state: {} })\n                                setAnchorEl(null);\n                              }}>My Profile</MenuItem>\n      \n                              {/* My post (10) */}\n      \n                            <MenuItem \n                              onClick={()=>{\n                                history.push({pathname: `/new-post`, state: {} })\n                                setAnchorEl(null);\n                              }}>New post</MenuItem>\n                            <MenuItem \n                              onClick={()=>{\n                                history.push({pathname: `/my-profile/my-post`, state: {} })\n                                setAnchorEl(null);\n                              }}>Posts {props.my_apps.length}</MenuItem>\n      \n                          <MenuItem \n                              onClick={()=>{\n                                history.push({pathname: `/my-profile/follows`, state: {} })\n                                setAnchorEl(null);\n                              }}>Follows {follows.length}</MenuItem>\n                              {/*\n                            <MenuItem \n                              onClick={()=>{\n                                // setLoadingOverlay(true)\n      \n                                props.clearCached({})\n                                toast.info(\"Clear cached success.\", \n                                {\n                                    position: \"bottom-right\", \n                                    hideProgressBar: true,\n                                    autoClose: 1000,\n                                }) \n      \n                                setAnchorEl(null);\n                              }}>Clear cached</MenuItem> */}\n                            <MenuItem \n                              onClick={()=>{\n                                setShowModalLogout(true); \n                                setAnchorEl(null);\n      \n                                \n                              }}>Logout</MenuItem>\n                          </Menu> \n                          <LoginDialog showModal={showModal} mode={\"login\"} onClose = {()=>{setShowModal(false)}} />\n                          <LogoutDialog showModalLogout={showModalLogout} onClose = {()=>{setShowModalLogout(false)}} />\n                        </div>\n\n                   }\n                   \n                </Toolbar>\n              </AppBar>\n            </div>\n  );\n};\n  \nconst mapStateToProps = (state, ownProps) => {\n\n\treturn {\n    user: state.user.data,\n    data: state.app.data,\n\n    follows: state.app.follows,\n\n    follow_ups: state.user.follow_ups,\n\n\n    my_apps: state.my_apps.data,\n    maintenance: state.setting.maintenance,\n\n    socket_data: state.socket.data\n  };\n}\n\nconst mapDispatchToProps = {\n  userLogout,\n  loadingOverlay,\n  clearCached\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderBar)"]},"metadata":{},"sourceType":"module"}