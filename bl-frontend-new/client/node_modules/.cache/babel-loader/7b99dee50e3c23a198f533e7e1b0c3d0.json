{"ast":null,"code":"var _jsxFileName = \"/app/src/pages/FollowsPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from 'react-redux';\nimport { useHistory } from \"react-router-dom\";\nimport Lightbox from \"react-image-lightbox\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport ls from 'local-storage';\nimport MoreVertOutlinedIcon from '@material-ui/icons/MoreVertOutlined';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport UseFollowsItem from \"./UseFollowsItem\";\nimport { followUp } from '../actions/user';\nimport { addContentsData, addFollowsData } from '../actions/app';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _ = require('lodash');\n\nconst FollowsPage = props => {\n  _s();\n\n  const history = useHistory();\n  const [follows, setFollows] = useState([]);\n  useEffect(() => {\n    fetch();\n  }, []);\n  useEffect(async () => {\n    try {\n      if (!_.isEmpty(props.follows)) {\n        let follows_filter = props.follows.filter(o => {\n          return _.isEmpty(props.datas.find(d => d.nid === o.nid));\n        }).map(i => i.nid);\n        let follows_map = props.follows.map(o => {\n          return props.datas.find(d => d.nid === o.nid);\n        }).filter(f => !_.isEmpty(f));\n\n        if (!_.isEmpty(follows_filter)) {\n          let response = await axios.post(`/api/v1/search`, {\n            type: 3,\n            key_word: follows_filter\n          }, {\n            headers: {\n              'Authorization': `Basic ${ls.get('basic_auth')}`\n            }\n          });\n          response = response.data;\n\n          if (response.result) {\n            let {\n              execution_time,\n              datas,\n              count\n            } = response;\n            props.addContentsData(datas);\n            setFollows([...follows_map, ...follows_filter.map(o => {\n              return datas.find(d => d.nid === o.nid);\n            }).filter(f => !_.isEmpty(f))]);\n          }\n        } else {\n          setFollows(follows_map);\n        }\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }, [props.follows]);\n\n  const fetch = async () => {\n    try {\n      let response = await axios.post(`/api/v1/follows`, {\n        uid: props.user.uid\n      }, {\n        headers: {\n          'Authorization': `Basic ${ls.get('basic_auth')}`\n        }\n      });\n      response = response.data;\n      console.log(\"response : \", response);\n\n      if (response.result) {\n        props.addFollowsData(response.datas);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const updateState = data => {\n    switch (Object.keys(data)[0]) {\n      case \"showModalLogin\":\n        {\n          // setShowModalLogin(Object.values(data)[0])\n          break;\n        }\n\n      case \"showModalReport\":\n        {\n          // setShowModalReport(Object.values(data)[0])\n          break;\n        }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your follows\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), follows.map(item => {\n      return /*#__PURE__*/_jsxDEV(UseFollowsItem, { ...props,\n        item: item,\n        updateState: updateState // onModalConfirmDelete={onModalConfirmDelete}\n        // onModalConfirmUpdateStatus={onModalConfirmUpdateStatus}\n\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 28\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FollowsPage, \"rNEnbbmQ3z6JoERyGWcEjZBDyO0=\", false, function () {\n  return [useHistory];\n});\n\n_c = FollowsPage;\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    user: state.user.data,\n    datas: state.app.data,\n    follows: state.app.follows,\n    maintenance: state.setting.maintenance\n  };\n};\n\nconst mapDispatchToProps = {\n  followUp,\n  addContentsData,\n  addFollowsData\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(FollowsPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"FollowsPage\");","map":{"version":3,"sources":["/app/src/pages/FollowsPage.js"],"names":["React","useEffect","useState","useRef","connect","useHistory","Lightbox","MenuItem","Menu","CircularProgress","axios","ls","MoreVertOutlinedIcon","LazyLoadImage","UseFollowsItem","followUp","addContentsData","addFollowsData","_","require","FollowsPage","props","history","follows","setFollows","fetch","isEmpty","follows_filter","filter","o","datas","find","d","nid","map","i","follows_map","f","response","post","type","key_word","headers","get","data","result","execution_time","count","err","console","log","uid","user","updateState","Object","keys","item","mapStateToProps","state","ownProps","app","maintenance","setting","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { connect } from 'react-redux'\nimport { useHistory } from \"react-router-dom\";\n\nimport Lightbox from \"react-image-lightbox\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\n\nimport { CircularProgress } from '@material-ui/core';\n\nimport axios from 'axios';\nimport ls from 'local-storage';\n\nimport MoreVertOutlinedIcon from '@material-ui/icons/MoreVertOutlined';\n\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\n\nimport UseFollowsItem from \"./UseFollowsItem\";\nimport { followUp } from '../actions/user';\n\nimport { addContentsData, addFollowsData } from '../actions/app'\nvar _ = require('lodash');\n\nconst FollowsPage = (props) => {\n    const history = useHistory();\n\n    const [follows, setFollows]    = useState([]);\n\n    useEffect(() => {\n        fetch()\n    }, []);\n\n    useEffect( async() => {\n        try{\n            if(!_.isEmpty(props.follows)){\n                let follows_filter = props.follows.filter((o)=>{\n                                                            return _.isEmpty(props.datas.find((d)=>d.nid === o.nid)) \n                                                        }).map((i)=>i.nid)\n\n                let follows_map =   props.follows.map((o)=>{\n                                        return props.datas.find((d)=>d.nid === o.nid) \n                                    }).filter((f)=>!_.isEmpty(f))\n\n                if(!_.isEmpty(follows_filter)){\n        \n                    let response =  await axios.post(`/api/v1/search`, \n                                            {   type: 3,\n                                                key_word: follows_filter,\n                                            }, \n                                            { headers: {'Authorization': `Basic ${ls.get('basic_auth')}` } });\n\n                    response = response.data\n                    if(response.result){\n                        let {execution_time, datas, count } = response;\n                        props.addContentsData(datas);\n\n                        setFollows([...follows_map, ...follows_filter.map((o)=>{ return datas.find((d)=>d.nid === o.nid) }).filter((f)=>!_.isEmpty(f)) ])\n                    }\n                }else{\n\n                    setFollows(follows_map)\n                }\n            }\n        } catch (err) {\n            console.log(err)\n        }\n    }, [props.follows]);\n\n    const fetch = async() =>{\n        try{\n            let response =  await axios.post(`/api/v1/follows`, \n                                            { uid: props.user.uid }, \n                                            { headers: {'Authorization': `Basic ${ls.get('basic_auth')}` } });\n\n            response = response.data\n            console.log(\"response : \", response )\n            if(response.result){\n                props.addFollowsData(response.datas);\n            }\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    const updateState = data => {\n        switch(Object.keys(data)[0]){\n          case \"showModalLogin\":{\n            // setShowModalLogin(Object.values(data)[0])\n            break;\n          }\n          case \"showModalReport\":{\n            // setShowModalReport(Object.values(data)[0])\n            break;\n          }\n        }\n    }\n\n    return (\n        <div>\n            <h1>Your follows</h1>\n            {                \n                follows.map((item)=>{\n                    return <UseFollowsItem \n                        {...props} \n                        item={item}\n                        updateState={updateState}\n                        // onModalConfirmDelete={onModalConfirmDelete}\n                        // onModalConfirmUpdateStatus={onModalConfirmUpdateStatus}\n                    />\n                })\n            }\n        </div>\n    )\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n        user: state.user.data,\n        datas: state.app.data,\n        follows: state.app.follows,\n        maintenance: state.setting.maintenance\n    };\n}\n\nconst mapDispatchToProps = {\n    followUp,\n\n    addContentsData,\n    addFollowsData,\n}\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(FollowsPage)"]},"metadata":{},"sourceType":"module"}